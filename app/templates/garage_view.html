{% extends "index.html" %}

{% block content %}
<head>
  <!-- Include jQuery library and external sorting script -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="{{ url_for('static', filename='js/sorting.js') }}"></script>
</head>

<form action="{{ url_for('garage_car') }}" method="POST">
<header id="header">
  <h2>Garage</h2>
</header>

<!-- Display a table for car data with sortable columns -->
<table class="table" id="carTable">
    <thead>
      <tr>
        <!-- Define sortable columns with clickable links -->
        <th scope="col"><a href="#" class="sort-link" data-sort="plate">Plate</a></th>
        <th scope="col"><a href="#" class="sort-link" data-sort="make">Make</a></th>
        <th scope="col"><a href="#" class="sort-link" data-sort="model">Model</a></th>
        <th scope="col"><a href="#" class="sort-link" data-sort="fuel">Fuel</a></th>
        <th scope="col"><a href="#" class="sort-link" data-sort="year">Year</a></th>
        <th scope="col"><a href="#" class="sort-link" data-sort="cc">Cc</a></th>
        <th scope="col"><a href="#" class="sort-link" data-sort="cc">Actions</a></th>
      </tr>
    </thead>
    <tbody>
      <!-- Iterate through user_cars and display car data in rows -->
      {% for car in user_cars %}
      <tr>
          <!-- Display car data with associated sorting attribute -->
          <td data-sort="plate">{{ car.plate }}</td>
          <td data-sort="make">{{ car.make }}</td>
          <td data-sort="model">{{ car.model }}</td>
          <td data-sort="fuel">{{ car.fuel }}</td>
          <td data-sort="year">{{ car.year }}</td>
          <td data-sort="cc">{{ car.cc }}</td>
          <td>
            <!-- Add hidden input for Car plate -->
            <input type="hidden" name="car_plate" value="{{ car.plate }}">
            <button type="submit" class="btn btn-danger" name="garage_car" value="{{ car.plate }}"><i class="fa-solid fa-wrench"></i></button>
          </form>
        </td>
        <td>
          <!-- Button to delete a car -->
          <form action="/delete" method="POST" style="margin: 0; margin-left: -130px;" onsubmit="return confirm('Are you sure you want to delete this car? All the bookings related to this car will be deleted too.');">
            <input type="hidden" name="car_plate" value="{{ car.plate }}">
            <button type="submit" class="btn btn-danger btn-delete"><i class="fas fa-trash-alt"></i></button>
          </form>
        </td>
      </tr>
      {% endfor %}
  </tbody>
</table>

{% endblock %}


