{% extends "index.html" %}

{% block content %}
<!-- Link to your CSS file -->

<link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">

<!-- Flash Messages -->
{% for category, message in get_flashed_messages(with_categories=true) %}
    {% if category == 'success' %}
        <div class="alert alert-success" style="color: #155724; background-color: #d4edda; border-color: #c3e6cb; padding: 10px; margin-top: 10px;">
            {{ message }}
        </div>
    {% elif category == 'error' %}
        <div class="alert alert-danger" style="color: #721c24; background-color: #f8d7da; border-color: #f5c6cb; padding: 10px; margin-top: 10px;">
            {{ message }}
        </div>
    {% endif %}
{% endfor %}

<table class="calendar">
    <tr>
        <th>Car</th>
        {% for day in range(1, 32) %}
        <th>{{ day }}</th>
        {% endfor %}
    </tr>
    {% for car in cars %}
    <tr>
      <td>{{ car.model }} - {{ car.plate }}</td>
      {% for day in range(1, 32) %}
      {% set booked = false %}
      {% for booking in bookings %}
      {% if booking.car_id == car.id %}
      {{ booking.start_datetime.date() }} - {{ day }}
      {% if booking.start_datetime.date().day == day %}
      {% set booked = true %}
      {% endif %}
      {% endif %}
      {% endfor %}
      <td class="{% if booked %}booked{% endif %}"></td>
      {% endfor %}
    </tr>
    {% endfor %}
    
</table>



{% endblock %}